package flagday

import "testing"

type equinoxDay struct {
	year int
	day  int
}

// see:
// 1949-1999: http://www.asahi-net.or.jp/~CI5M-NMR/misc/equinox.html#Current
// 2000-2030: https://www.nao.ac.jp/faq/a0301.html
var springEquinoxDays = []equinoxDay{
	{1949, 21},
	{1950, 21},
	{1951, 21},
	{1952, 21},
	{1953, 21},
	{1954, 21},
	{1955, 21},
	{1956, 21},
	{1957, 21},
	{1958, 21},
	{1959, 21},
	{1960, 20},
	{1961, 21},
	{1962, 21},
	{1963, 21},
	{1964, 20},
	{1965, 21},
	{1966, 21},
	{1967, 21},
	{1968, 20},
	{1969, 21},
	{1970, 21},
	{1971, 21},
	{1972, 20},
	{1973, 21},
	{1974, 21},
	{1975, 21},
	{1976, 20},
	{1977, 21},
	{1978, 21},
	{1979, 21},
	{1980, 20},
	{1981, 21},
	{1982, 21},
	{1983, 21},
	{1984, 20},
	{1985, 21},
	{1986, 21},
	{1987, 21},
	{1988, 20},
	{1989, 21},
	{1990, 21},
	{1991, 21},
	{1992, 20},
	{1993, 20},
	{1994, 21},
	{1995, 21},
	{1996, 20},
	{1997, 20},
	{1998, 21},
	{1999, 21},
	{2000, 20},
	{2001, 20},
	{2002, 21},
	{2003, 21},
	{2004, 20},
	{2005, 20},
	{2006, 21},
	{2007, 21},
	{2008, 20},
	{2009, 20},
	{2010, 21},
	{2011, 21},
	{2012, 20},
	{2013, 20},
	{2014, 21},
	{2015, 21},
	{2016, 20},
	{2017, 20},
	{2018, 21},
	{2019, 21},
	{2020, 20},
	{2021, 20},
	{2022, 21},
	{2023, 21},
	{2024, 20},
	{2025, 20},
	{2026, 20},
	{2027, 21},
	{2028, 20},
	{2029, 20},
	{2030, 20},
}
var autumnEquinoxDays = []equinoxDay{
	{1948, 23},
	{1949, 23},
	{1950, 23},
	{1951, 24},
	{1952, 23},
	{1953, 23},
	{1954, 23},
	{1955, 24},
	{1956, 23},
	{1957, 23},
	{1958, 23},
	{1959, 24},
	{1960, 23},
	{1961, 23},
	{1962, 23},
	{1963, 24},
	{1964, 23},
	{1965, 23},
	{1966, 23},
	{1967, 24},
	{1968, 23},
	{1969, 23},
	{1970, 23},
	{1971, 24},
	{1972, 23},
	{1973, 23},
	{1974, 23},
	{1975, 24},
	{1976, 23},
	{1977, 23},
	{1978, 23},
	{1979, 24},
	{1980, 23},
	{1981, 23},
	{1982, 23},
	{1983, 23},
	{1984, 23},
	{1985, 23},
	{1986, 23},
	{1987, 23},
	{1988, 23},
	{1989, 23},
	{1990, 23},
	{1991, 23},
	{1992, 23},
	{1993, 23},
	{1994, 23},
	{1995, 23},
	{1996, 23},
	{1997, 23},
	{1998, 23},
	{1999, 23},
	{2000, 23},
	{2001, 23},
	{2002, 23},
	{2003, 23},
	{2004, 23},
	{2005, 23},
	{2006, 23},
	{2007, 23},
	{2008, 23},
	{2009, 23},
	{2010, 23},
	{2011, 23},
	{2012, 22},
	{2013, 23},
	{2014, 23},
	{2015, 23},
	{2016, 22},
	{2017, 23},
	{2018, 23},
	{2019, 23},
	{2020, 22},
	{2021, 23},
	{2022, 23},
	{2023, 23},
	{2024, 22},
	{2025, 23},
	{2026, 23},
	{2027, 23},
	{2028, 22},
	{2029, 23},
	{2030, 23},
}

func TestSpringEquinoxDay(t *testing.T) {
	for _, ed := range springEquinoxDays {
		d, err := PublicHolidayOf(ed.year, 3, ed.day)
		if err != nil {
			t.Errorf("spring equinox day in %d expects %d, but got %d", ed.year, ed.day, d.Day())
		}
	}
}

func TestAutumnEquinoxDay(t *testing.T) {
	for _, ed := range autumnEquinoxDays {
		d, err := PublicHolidayOf(ed.year, 9, ed.day)
		if err != nil {
			t.Errorf("autumn equinox day in %d expects %d, but got %d", ed.year, ed.day, d.Day())
		}
	}
}
